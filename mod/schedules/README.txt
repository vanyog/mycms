Модул за представяне на графици
===============================

Графикът е група от събития, всяко от които има момент на започване и момент на свършване.

Модулът използва таблица $tn_prefix.'schedules' от базата данни. Всеки запис от таблицата съдържат информация за едно сабитие.  Полета на таблицата са:

ID - автоматичен номер, първичен ключ
sch_name - име на график,
ev_name - име на събитие,
date_time_1 - начало на събитието,
date_time_2 - край на събитието. За събитие, което няма продължителност се задава date_time_2 да съвпада с date_time_1.

Името на графика и имената на събитията са имена на записи от таблица $tn_prefix.'content'. Така тези имена може да се въвеждат на различни езици.

Страницата от сайта, предназначена за администриране на графици трябва да съдържа елемент:

<!--$$_SCHEDULES_$$-->

На тази страница се показва:
Падащ списък "Налични графици".
Хипервръзка "Създаване на нов график"
Името и списъкът от събития на избрания от "Налични графици" график.

Избирането на друг график от списъка "Налични графици" предизвиква смяна на името и списъка от събития. Чрез този списък се избира, събитията от кой график да се показват, за да могат да се редактират.

Хипервръзката "Създаване на нов график", създава нов запис в таблица $tn_prefix.'schedules'. С това се създава ново събитие, от нов график.

За да се редактират имената на графици и събития, страницата за администриране на графици трябва да е в режим на редактиране. 

Ако името на график още не е въведено, то се показва като хипревръзка с надпис, започващ с думата "schedule_" следван от уникален номер. За да се въведе, име на график подходящо за показване в страниците на сайта, се щраква върху тази хипервръзка. Името се въвежда на езика, който е текущ в момента. За да се въведе име на друг език, се сменя езика и се използва отново същата хипервръзка.

След като името на графика е въведено, след него се показва хипервръзка *, щракването върху която отваря страница за редактиране на името.

Аналагично става редактирането и на имената на събитията.

Ако името на събитие още не е въведено, то се показва като хипревръзка с надпис, започващ с думите "schedule_event_" следвани от уникален номер. За да се въведе, име на събитието подходящо за показване в страниците на сайта, се щраква върху тази хипервръзка. Името се въвежда на езика, който е текущ в момента. За да се въведе име на друг език, се сменя езика и се използва отново същата хипервръзка.

След като името на събитие е въведено, след него се показва хипервръзка *, щракването върху която отваря страница за редактиране на името.

При създаване на ново събитие, времето и датата на началото и на края на събитието е времето на моманта на създаване на събитието. Времето на началото на събитието е хипревръзка. Щракването върху тази хипервръзка отваря страница за редактиране на началото и края на събитието.

Хипервръзката с надпис цифра 2, създава нов запис-копие на събитие със същите дати на начало и край.

На страници, на които трябва да се показват сибития от график се вмъква елемент:

<!--$$_SCHEDULES_имеНаГрафик|опция_$$-->

Опцията, може да бъде:

current - за показване на течащите в момента събития от графика
next30 - показване на събитията стартиращи през следващите 30 дни
all - показване на всички събития от графика

Въррху начина на показване на събитията се повлиява чрез стойностите на глобални променливи, които може да се задават с елементи, поставени след елемента за показване на събития:
<!--$$_SETVARIABLE_schedules_noyear|1_$$--> - изключване попоказването на години
<!--$$_SETVARIABLE_schedules_noline|1_$$--> - изключване показването на хоризонтална линия, съответстваща на днешната дата
<!--$$_SETVARIABLE_schedules_nomonth|1_$$--> - изключване показването на месеци
<!--$$_SETVARIABLE_schedules_nostart|1_$$--> - изключване показването на началните дати на събитията