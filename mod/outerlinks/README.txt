Модул OUTERLINKS
================

Показване и редактиране на колекция от хипервръзки към интернет страници (обикновено към страници от други сайтове). Хипервръзките се подреждат в дървовидна структура от категории, подкатегории и т.н. 

Всяка подкатегория може да съдържа както връзки към интернет страници, така и подкатегории. Показват се първо имената на подкатегориите, а след тях връзките към интернет страници.

Модулът използва таблица $tn_prefix.'outer_links' с полета:

ID - номер на запис
place - числа 10, 20, 30 ... за задаване реда на хипервръзките при показването им
date_time_1 - дата на създаване на хипервръзката
link - URL на страница. Може да е число, представляващо ID на друг запис от таблицата. Това означава, че текущият запис е дубликат на посочения. Може да е празен стринг и тогава даденият запис е категория, към която принадлежат други записи, чиито полета up съдържат ID-то на този запис.
Title - текст върху хипервръзката
Comment - текст - описание на хипервръзката, не е задължителен
up - ID номер на запис родителска категория
clicked - брой кликвания върху хипервръзката
vtime - среден интервал време между щракванията върху хипервръзката
private - при стойност 1 на това поле, хипервръзката се показва само в режим на редактиране.

В режим на редактиране на сайта при отваряне на дадена категория пред всяка хипервръзка се показва радио-бутон, а под всички хипервръзки - полета за редактиране.

За създаване на нова категория се попълва само поле Title и се щраква бутон "Add/Update".

За добавяне на нова връзка, URL-ът на новата връзка се пейства в поле URL и се натиска клавиш Tab, което предизвиква преместване на курсора за писане в поле Title. Ако това поле е празно се прави опит да бъде попълнено автоматично от таг <tytle> на сайта. Ако възникне грешка, текстът в това поле може да се коригира ръчно. Въвеждането се извършва с щракване на бутон "Add/Update".

За промяна на някое свойство на съществуваща хипервръзка се щраква радио-бутона пред хипервръзката, която трябва да се промени, попълва се нова стойност на свойството, което трябва да се промени и се щраква бутона "Add/Update".

За изтриване на хипервръзка се щраква радио-бутона пред нея и после - бутона "Delete". Категории се изтриват само ако се празни и не съдържат хипервръзки или подкатегории.

Хипервръзките се нареждат по възходящ ред на числата, изписвани веднага след радио-бутоните. Тези числа са кратни на 10. За да се премести хипервръзка пред първата хипервръзка от категорията се щраква радио-бутона пред нея и после с натиснат клавиш Ctrl се щраква с левия бутон на мишката върху числото пред първата хипервръзка. Това попълва поле Place на избраната хипервръзка с число с 5 по малко от числото на първата връзка. След щракване на бутон "Add/Update" числата се правят отново кратни на 10, но избраната връзка си променя мястото, като отива пред първата.

За преместване на връзка след друга връзка се щраква радио-бутона пред нея и после се щраква с левия бутон на мишката върху числото пред връзката след която трябва да се премести избраната. Това попълва поле Place на избраната хипервръзка с число с 5 по-голямо от числото на първата връзка. След щракване на бутон "Add/Update" числата се правят отново кратни на 10, но избраната връзка отива на новото място.

Файл check_pdfs.php е скрипт, който поддържа локални копия на pdf файловете, към които има връзки в таблица $tn_prefix.'outer_links'. Създаден е защото с течение на времето, някои файлове се премахват от Интернет и ако те съдържат ценна за потребителя информация, с този скрипт може да се осигури тяхното сваляне и локално запазване. Директорията, в която се съхраняват свалени на компютъра на потребителя файлове се задава като стойност на променливата $fpth в началото на скрипта. Скриптът може да се използва на локален (инсталиран върху компютъра на потребителя) сървър. Показва хипервръзки към свалените локално pdf файлове, по реда на въвеждане на връзките в таблицата на базата данни. Когато липсва файл в посочената директория се показва оцветен в червено линк "download". Свалянето на файла се извършва с щракване на десния бутон на мишката върху този линк и команда "Save Link As ...". Червеният линк "download" изчезва след презареждане на страницата, око файлът вече съществува в локалната директория.

Към страницата, показваща интернет връзки може да се изпрати параметър $_GET['just']=='data' и тогава вместо интернет страница се генерира json, от данните на записа с номер $_GET['lid'] Това се използва от модул OUTERLINK за извличане на данни от друг сървър, на който се използва настоящата система VanyoG CMS и модул OUTERLINKS.

