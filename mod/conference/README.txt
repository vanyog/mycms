Модул за научна конференция
===========================

Ако имате въпроси, на които не намирате отговор в този файл, задайте ги през
https://github.com/vanyog/mycms/issues

Модулът изисква модул USERREG, SCHEDULES, както и други непубликувани модули.

Предназначението на модул CONFERENCE е да генерира:

1. Страница за: влизане на потребител, създаване на нов и редактиране на личните данни на потребител за конференцията.
   Страницата трябва да съдържа елемента:
   <!--$$_USERREG_типПотребител|номер_$$-->
   номерът е на страницата за личното участие на потребителя, посочена в 2.
   Страницата трябва да е посочена в настройките на модул USERREG. (Вижте README.txt файла на модул USERREG.)
2. Лична страница за участник в конференцията, от която той:
   - редактира личните си данни;
   - редактира резюметата на доклади;
   - качва пълен текст и презентации на доклади;
   - рецензира доклади, ако е рецензент.
   Трябва да съдържа елементите:
   <!--$$_CONFERENCE_$$-->
   <!--$$_USERREG_типПотребител_$$-->
3. Страница за редактиране данните за доклад.
   Трябва да съдържа елемент:
   < !--$$_CONFERENCE_edit_$$-->
4. Страница за администриране, с която потребител със зададено право върху модула,
   може да преглежда и редактира регистрациите на участниците.
   Трябва да съдържа елемент: <!--$$_CONFERENCE_admin_$$-->
5. Страница за показване заглавията на одобрените доклади и линкове към пълните им текстове,
   групирани по томове, научни секции и форми на изнасяне.
   Трябва да съдържа елемента: <!--$$_CONFERENCE_abstract_t|типПотребител_$$-->
6. Страница за показване на резюметата на докладите (Сборник резюмета).
   Трябва да съдържа елемента: <!--$$_CONFERENCE_abstracts|типПотребител_$$-->
7. Страница за рецензиране.
   Съдържаща елемент: <!--$$_CONFERENCE_review|типПотребител_$$-->

За правилното функциониране на модула:

- в таблица 'options' трябва да са зададени следните настройки:

'conference_usertype' - тип на участника в конференцията.
'conference_editpage' - адрес на страница 1 за регистриране/редактиране на личните данни на един участник.
'conference_editpaper' - адрес на страницата 3 за редактиране на резюме и качване на доклад от участник.
'conference_admin' - адрес на страница 4 за администриране на конференцията.
'conference_abstracts' - адрес на страница 5 за показване на резюметата.
'conference_abstractBook' - адрес на страница 6 за показване на резюметата.
'conference_reviewpage' - адрес на страница 7 за рецензиране.
'conference_files_'.'conference_usertype' - относителен път от кореновата директория на сайта до директория, в която участниците  качват .doc и .pdf файлове с пълния текст на докладите. Трябва да завършва с /.
'conference_day1event' - име на график и име на събитие в таблица 'schedules', което определя периода, в който участниците качват резюмета. Името на графика и името на събитието се отделят със запетая.
'conference_day2event' - име на график и име на събитие в таблица 'schedules', което определя периода, в който участниците качват пълния текст на докладите. Името на графика и името на събитието се отделят със запетая.
'conference_day3event' - име на график и име на събитие в таблица 'schedules', което определя до кой момент да не се показват одобрените доклади. Името на графика и името на събитието се отделят със запетая.
'conference_day4event' - име на график и име на събитие в таблица 'schedules', което определя до кой момент да не се показват одобрените пълни текстове на доклади. Името на графика и името на събитието се отделят със запетая.

Сложни комбинация от случайни исмволи, коитото се задават като стойност на $_GET['ac'] за да се даде достъп до страници извън времето, когато са отворени за всички посетители:
'conference_aBookAccess' - за страница "Сборник резюмета"
'conference_aRev1Access' - за и рецензиране на едно резюме
'conference_aAbsAccess' - преглеждане на резюме от участник, без да си влиза в профила.

- в таблица 'content' - да е зададена стойност:

'conference_ctopics_'.'conference_usertype' - PHP код, дефиниция на променлива $tp = array(); - масив от стрингове с имената на научните секции (тематични направления) на конференцията.

Модулът използва таблици:

$tnprefix.'users' - за общи данни на потребителите. Това е същата таблица, която се използва и от модулите USER и USERREG.

$tnprefix.'proceedings' - таблица с данни за доклади, с полета:
ID - идент. номер, първичен ключ, autoincrement 
user_id - ид. номер на потребите от таблица 'users', регистрирал доклада
utype - тип на потребителите, съвпада с поле `type` от таблица 'users'
date_time_1 - дата на създване на записа на доклада
date_time_2 - дата на последна редакция на доклада
language - код на език, 'bg', 'en' и т.н.
form - номер на формата на участие
topic - номер на научната секция
fee - платена от потребителя такса
currency - валута на платената такса
approved_a - дали е одобрено резюмето
approved_f - дали е одобрен пълния текст
publish - дали ще се публикува
keylec - дали е пленарен доклад
title - заглавие
authors - имана на авторите
addresses - адреси на авторите
keywords - ключови думи
abstract - текст на резюмето
abstracttextfile - файл, съдържащ резюме
fulltextfile - doc файл на пълния текст
fulltextfile2 - pdf файл с пълния текст
fulltextfile3 - pdf файл на пълния текст със заличени автори за анонимно рецензиране
fulltextfile4 - файл с презентация
vol - том
pages - брой страници
place - номер за подреждане
reviewer1 - ???

$tnprefix.'reviewers' - назначени към секциите Рецензенти, с полета:
ID - идент. номер, първичен ключ, autoincrement
date_time_1 - дата на създаване на записа
date_time_2 - дата на последна промяна
utype - тип потребител
user_id - ид. номер на потребителя рецензент
topic - научна секция
languages - езици, на които трбва да са докладите за рецензиране
confirmed - потвърдил, че желае да бъде рецензент

При стартиране на нова конференция:
-----------------------------------------

1. Ако страниците на конференцията трябва да изглеждат по-различно от другите страници на сайта се създава нов шаблон в таблица templates.
2. За да могат участниците от предишната конференция да не си правят нова регистрация в предстоящата, стойността на поле `type` в таблица $user_table се променя от стойността от предишната конференция на стойността за новата конференция, съвпадаща с настройката 'conference_usertype'.
3. За новата конференция, освен страниците с обща информация, достъпни за всички посетители, се създават страници за:
 - влизане на потребител, създаване на нов и редактиране на личните данни на потребител
   страницата да съдържа елемента:
   <!--$$_USERREG_vsu2017|367_$$-->
   vsu2017 е типът потребител, 367 е номера на страницата за личното участие на потребителя.
   Страницата трябва да е посочена в настройките на модул USERREG. (Вижте README.txt файла на модул USERREG.)
 - личното участие на потребителя в конференцията, указана с опцията 'conference_editpage',
   страницата трябва да съдържа елементите:
   <!--$$_CONFERENCE_$$-->
   <!--$$_USERREG_vsu2017_$$-->
   където vsu2017 е типът потребител
 - преглеждане на регистрациите от администратор
   страницата трябва да съдържа елемента:
   <!--$$_CONFERENCE_admin_$$-->
   За администриране, може и да не се създава нова страница, ако вече има такава от предишна конференция. Достатъчно е само да се смени шаблона на страницата от предишна конференция с нов шаблон, използван на страниците на новата конференция.
- показване на заглавията, авторите и качените файлове на одобрените доклади
  страницата трябва да съдържа елемента
  <!--$$_CONFERENCE_abstract_t|типПотребител_$$-->
  Частта "|типПотребител" е необходимо да се добави, когато на различни страници от сайта се показват заглавията на докладите от различни, хоствани в сайта конференции.
  Преди обявената дата за връщане на отговор до участниците, дали са им одобрени докладите, на тази страница обикновените посетители виждат само заглавията на научните секции, а потребителите с право да администрират конференцията виждат всички въведени в системата доклади.
- показване на на одобрените резюмета
    страницата трябва да съдържа елемента
    <!--$$_CONFERENCE_abstracts_$$-->

Регистриране на нови участници от администратор
-----------------------------------------------

Някои участници изпращат заявки за участие и резюмета по имейл, а не правят сами регистрацията си. За да бъдат данните на всички участници едно място - на сайта и за да се обработват по единен начин, на тези участници също се правят профили от администратор на конференцията. Администраторът следва да има пълни администраторски права или право за модул userres да създава нови потребители. Процедурата е следната:

1. На страницата за администрира, показваща всички регистрации, с функцията на браузъра за търсене на текст търси имейла на изпращача.

2. Ако имейлът не се среща, чрез щракване върху линка "UserReg New" създаваме нов потребител с този имейл. После се връщаме на страницата с регистрациите и я презареждаме.

3. Презареждаме страницата с регистрациите и ако новият потребител не е на първо място, избираме от падащия списък "подреждане по:" "Последна промяна" и щракваме бутона "подреди". Ако отново не е на първо място, щракваме бутона "подреди" още веднъж.

4. В колона ID щракваме върху системния номер на потребителя, попълваме личните му данни и пак се връщаме на страницата с регистрациите. Презареждаме и трябва да се появят и току що попълнените данни.

Въвеждане на резюбета от администратор
--------------------------------------

1. На страницата, показваща всички регистрации, срещу името на участника, в колона "Брой доклади" се щраква линка "+". Това добавя нов, празен запис за доклад на съответния участники и страницата се превърта до мястото на този доклад.

2. Щраква се линка "Редактиране" и се въвеждат данните за доклада. След запазване на данните се връщаме на страницата с регистрациите за да видим резултата.

Назначаване на рецензенти
-------------------------
Към научни направления

Започва се от страницата за администриране на конференцията. В таблицата с регистрираните потребители, в първата колона има линк R. Щракването на този линк отваря страница, която показва научното звание и длъжност, името и институцията на потребителя, списък на научните секции към които е назначен за рецензент (ако е назначен). За да бъде назначен за рецензент, от падащия списък се избира научна секция. В поле "езици" се изреждат кодовете на езиците на който трябва да са докладите за рецензиране от него, например: bg,en се пише за български и английски. Ако е дал съгласието си да бъде рецензент се поставя отметка "потвърдил". Щраква се бутона "Запазване".

Преглеждане на назначените рецензенти

Под заглавието на страницата за администриране се щраква линк "Рецензенти".